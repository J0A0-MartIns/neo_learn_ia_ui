<div *ngIf="loading" class="loading">
    <p>Gerando questões...</p>
</div>

<div *ngIf="!loading && !finished" class="quiz-container">
    <h2 class="title">Questão {{ currentIndex + 1 }} / {{ questions.length }}</h2>

    <div class="question-box">
        <h3>{{ questions[currentIndex].text }}</h3>

        <div class="option"
             *ngFor="let opt of questions[currentIndex].options"
             [class.selected]="answers.get(questions[currentIndex].id) === opt.id"
             (click)="selectAnswer(opt.id)">
            {{ opt.text }}
        </div>
    </div>

    <div class="actions">
        <button *ngIf="currentIndex > 0" (click)="prevQuestion()">Anterior</button>

        <button *ngIf="currentIndex < questions.length - 1"
                (click)="nextQuestion()">Próxima</button>

        <button class="finish"
                *ngIf="currentIndex === questions.length - 1"
                (click)="finishQuiz()">
            Finalizar
        </button>
    </div>
</div>

<div *ngIf="finished" class="result-container">
    <h2>Resultado</h2>

    <p class="score">
        Você acertou {{ correctAnswers }} de {{ questions.length }}
    </p>

    <div class="actions">
        <button class="finish" (click)="retryQuiz()">Refazer</button>
        <button class="back" (click)="backToProject()">Voltar ao Projeto</button>
    </div>
</div>
